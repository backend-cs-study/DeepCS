# Chapter4-1. 데이터베이스의 기본

## 1) 데이터베이스
* **데이터베이스**: 일정한 규칙, 규약을 통해 구조화되어 저장되는 데이터 모음
* **DBMS**(DataBase Management System): 데이터베이스를 제어하고 통합 서비스
* 데이터베이스 위 DBMS 위 응용프로그램

<br>

## 2) 엔티티
* 사람, 장소, 물건, 사업, 개념 등 여러 개의 속성을 지닌 명사
  * 약한 엔티티: A가 B의 존재여부에 따라 종속적일 경우 A
  * 강한 엔티티: A가 B의 존재여부에 따라 종속적일 경우 B

<br>

## 3) 릴레이션
* 데이터베이스에서 정보를 구분하여 저장하는 기본 단위
* 엔티티에 관한데이터를 데이터베이스는 릴레이션 하나에 관리
* 관계형 데이터베이스는 테이블, NoSQL 데이터베이스에는 컬렉션
  * 관계형 데이터베이스 - MySQL는 레코드-테이블-데이터베이스로 구성
  * NoSQL 데이터베이스 - MongoDB는 도큐먼트-컬렉션-데이터베이스로 구성

<br>

## 4) 속성
* 릴레이션에서 관리하는 구체적이고 고유한 이름을 갖는 정보
* 서비스의 요구사항 기반으로 관리의 필요성이 있는 속성만 엔티티의 속성

<br>

## 5) 도메인
* 릴레이션에 포함된 각각의 속성들이 가질 수 없는 값의 집합

<br>

## 6) 필드와 레코드
* 필드의 경우 열의 속성, 레코드(튜플)은 테이블에 쌓는 행 단위의 데이터

### 1️⃣ 필드 타입 (MySQL 기준)
* 숫자 타입: `TINYINT`, `SMALLINT`, `MEDIUMINT`, `INT`, `BIGINT`
* 날짜 타입: `DATE`, `DATETIME`, `TIMESTAMP`
  * `DATE`: 날짜 부분, 3 바이트
  * `DATETIME`: 날짜 및 시간 부분, 8 바이트
  * `TIMESTAMP`:  날짜 및 시간 부분, 4 바이트
* 문자 타입: `CHAR`, `VARCHAR`, `TEXT`, `BLOB`, `ENUM`, `SET`
  * `CHAR`: 고정 길이 문자열, 0~255
  * `VARCHAR`: 가변 길이 문자열, 0~65535, 저장할 때 글자에 해당하는 바이트 + 길이 기록용 1바이트로 저장
  * `TEXT`: 큰 문자열 저장, 게시판의 본문을 저장할 때 사용
  * `BLOB`: 이미지, 동영상 등 데이터 저장에 사용. (보통은 아마존 S3 등 서버에 파일을 올리고 경로를 `VARCHAR`로 저장)
  * `ENUM`: 문자열 열거. 잘못된 값을 입력하면 빈 문자열 입력. 최대 65535개 요소 저장 가능
  * `SET`: 여러 데이터를 선택할 수 있고 비트 단위의 연산 가능. 64개의 요소 저장 가능

<br>

## 7) 관계
<img src="https://blog.kakaocdn.net/dn/kCnHv/btqLW8LRGpN/IDARbgYYD5WmA7wfo7m2y1/img.gif">

### 1️⃣ 1:1 관계
* 유저당 유저 이메일은 하나
* 1:1 관계는 테이블을 두 개의 테이블로 나눠 테이블의 구조를 더 이해하기 쉽게 만듦

<br>

### 2️⃣ 1:N 관계
* 한 유저당 여러 개의 상품을 장바구니에 넣을 수 있음
* 한 개체가 다른 많은 개체를 포함하는 관계

<br>

### 3️⃣ N:M 관계
* 학생은 여러 강의를 들을 수 있고 강의도 여러 학생을 포함할 수 있음
* N:M은 테이블 두 개를 직접적으로 연결해서 구축하지 않고, 1:N, 1:M 관계로 나누어 설정

<br>

## 8) 키
<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGZsN7LYTAxKYD6acf6hbw1mhsasVNLIR7pA&s">

* 테이블 간의 관계를 조금 더 명확하게 하고 테이블 자체의 인덱스를 위해 설정된 장치
* 슈퍼키는 유일성이 있고 그 안에 포함된 후보키는 최소성까지 갖춘 키
* 후보키 중에서 기본키로 선택되지 못한 키는 대체키
* 유일성은 중복되는 값은 없으며, 최소성은 필드를 조합하지 않고 최소 필드만 써서 키를 형성

### 1️⃣ 기본키 (PK, Primary Key)
* 유일성과 최소성을 만족하는 키
* 테이블의 데이터 중 고유하게 존재하는 속성, 기본키에 해당하는 데이터는 중복되어서는 안됨
* 기본키는 자연키, 인조키 중 선택
  * 자연키: 종복된 값들을 제외하며 중복되지 않은 것을 뽑다가 자연스럽게 도출된 키. 언젠가는 변할 수 있음
  * 인조키: 인위적인 고유 식별자 키를 생성. 변하지 않아 보통 기본키는 인조키로 설정

<br>

### 2️⃣ 외래키 (FK, Foreign Key)
* 다른 테이블의 기본키를 그대로 참조하는 값
* 개체와의 관계를 식별하는데 사용

<br>

### 3️⃣ 후보키 (candidate key)
* 기본키가 될 수 있는 후보들
* 유일성과 최소성을 동시에 만족하는 키

<br>

### 4️⃣ 대체키 (alternate key)
* 후보키가 두 개 이상일 경우 어느 하나를 기본키로 지정하고 남은 후보키

<br>

### 5️⃣ 슈퍼키 (super key)
* 각 레코드를 유일하게 식별할 수 있는 유일성을 갖춘 키