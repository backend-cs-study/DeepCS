# Chapter4-2. ERD와 정규화 과정

## 1) ERD (Entity Relationship Diagram)
* 데이터베이스를 구축할 때 가장 기초적인 뼈대. 릴레이션간 관계들 정의
* 시스템의 요구사항을 기반으로 작성
* ERD를 기반으로 데이터베이스 구축
* 장점: 관계형 구조로 표현할 수 있는 데이터 구성
* 단점: 비정형 데이터를 표현 어려움

<br>

## 2) 정규화 과정
* 릴레이션 간의 잘못된 종속관계로 인해 데이터베이스 이상 현상이 일어나 이를 해결하거나, 저장공간을 효율적으로 사용하기 위해 릴레이션을 여러개로 분리하는 과정
* 데이터베이스 이상현상 예시
  * 회원이 한 개 등급을 가져야 하는데 여러 개의 등급을 가짐
  * 삭제될 때 필요한 데이터가 같이 삭제
  * 데이터를 삽입해야 하는데 하나의 필드값이 NULL이 되면 안되어 삽입하기 어려운 현상

* 기본 정규형: 제 1정규형, 제 2정규형, 제 3정규형, 보이스/코드 정규화
* 고급 정규형: 제 4정규형, 제 5정규형

### 1️⃣ 제 1정규형
* 릴레이션의 모든 도메인이 더 이상 분해될 수 없는 원자값만 구성해야 함
* 릴레이션의 속성값 중 한개의 기본키에 대해 두개 이상의 값을 가지는 반복집합이 있으면 안됨

<br>

### 2️⃣ 제 2정규형
* 제 1정규형을 만족하며 부분 함수 종속성을 제거한 형태
* 부분 함수의 종속 제거: 기본 키가 아닌 모든 속성이 기본 키에 완전함수 종속인 것
* 릴레이션을 분해할 때 동등한 릴레이션으로 분해해야하고 정보 손실이 발생하지 않는 무손실 분해로 분해

<br>

### 3️⃣ 제 3정규형
* 제 2정규형을 만족하며 기본 키가 아닌 모든 속성이 이행적 함수 종속(transitive FD)를 만족하지 않는 상태
* 이행적 함수 종속: A→B 와 B→C가 존재할 시 A→C 성립

<br>

### 4️⃣ 보이스/코드 정규형 (BCNF)
* 제 3정규형을 만족하며 결정자가 아닌 함수 상속 관계를 제거하여 릴레이션의 함수 종속 관계에서 모든 결정자가 후보 키인 상태

> #### 📢 결정자
> * 함수 종속 관계에서 특정 종속자를 결정짓는 요소
> * X→Y일 때 X는 결정자, Y는 종속자

* 정규화 과정을 거친다고 성능이 전부 좋아지는 것은 아님
* 조인을 해야하는 경우가 발생하여 오히려 느려질 수도 있어 서비스에 따라 정규화 또는 비정규화 과정을 진행해야 함