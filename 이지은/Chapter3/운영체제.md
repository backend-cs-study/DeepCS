# Chapter3-1. 운영체제

## 1) 운영체제
사용자가 컴퓨터를 쉽게 다루게 하는 인터페이스. 한정된 메모리와 시스템 자원을 효율적으로 분배 <br>
cf) 펌웨어 - 운영체제와 비슷하지만 소프트웨어의 추가 설치x

> 운영체제는 하드웨어를 관리하고, 
> **중앙처리장치, 기억장치, 입출력 장치**라는 컴퓨터의 자원을 사용자가 효율적으로 활용할 수 있도록 관리 시스템 소프트웨어

<br>

#### 🪛 운영체제 기능
  1) CPU 스케줄링 프로세스 관리: CPU 소유권을 어떤 프로세스에게 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리
  2) 메모리 관리: 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 할 지 관리
  3) 디스크 파일 관리: 디스크 파일을 어떤 방법으로 보관할지 관리
  4) I/O 디바이스 관리: I/O 디바이스인 마우스, 키보드와 컴퓨터 간 데이터를 주고받는 것을 관리하고 복잡한 과정없이 하드웨어 장비를 사용할 수 있도록 하드웨어 인터페이스 (= 소프트웨어) 제공

#### ⚙️ 운영체제 구조
<img src="https://img1.daumcdn.net/thumb/R960x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FciECgP%2FbtsrcqRVXJV%2Fufrztt3iEKGrM61O5xpo0k%2Fimg.png">

<br>

### 1️⃣ 시스템콜
* 운영체제가 커널에 접근하기 위한 인터페이스
* 유저 프로그램이 운영체제의 서비스를 받기 위해 커널함수를 호출

* 과정
  1) 유저 프로그램이 I/O 요청으로 트랩발동
  2) 유저모드가 시스템콜을 통해 커널모드로 변환
* 의의
  1) 컴퓨터 자원에 대한 직접접근을 차단하여 프로그램을 보호
  2) 운영체제로의 요청 추상화로 네트워크 통신이나 데이터베이스 등 낮은 단계 영역처리를 신경쓰지 않고 구현 가능
* medebit: 0은 커널모드, 1은 유저모드의 값을 가져 유저모드와 커널모드를 구분

> ### 📢 유저모드와 커널모드
> * **유저모드**: 유저가 접근할 수 있는 영역을 제한적으로 두어 컴퓨터 자원에 침범하지 못하는 모드
> * **커널모드**: 모든 컴퓨터 자원에 접근할 수 있는 모드

<br>

### 2️⃣ 커널
* 운영체제의 핵심 부분이자 System Call 인터페이스를 제공하며 보안, 메모리, 프로세스, 파일시스템 , I/O 디바이스, I/O 요청 관리 등 운영체제에서 중추적인 역할
* 커널의 안정성과 보안성 = 운영체제의 안정성과 보안성에 직접적인 영향을 미치며, 운영체제 전체의 안정성과 보안성을 결정짓는 중요한 요소

<br>

## 2) 컴퓨터의 요소
<img src="https://blog.kakaocdn.net/dn/bXw6ma/btrXml8rJpk/kPMcLzvUDDzN4puNc8krJk/img.jpg">

### 1️⃣ CPU (Central Processing Unit)
* 산술논리연산제어장치, 제어장치, 레지스터로 구성
* 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석하여 실행
* 관리자 역할을 하는 운영체제의 커널이 프로그램을 메모리에 올려 프로세스로 만들면 CPU가 처리

> ### 📢 산술논리연산제어장치, 제어장치, 레지스터
> 1) **제어장치** (CU, Control): 프로세스 조직을 지시하는 CPU의 부품. 입출력 장치간 통신을 제어. 명령어 해석. 데이터 처리 순서 결정
> 2) **레지스터**: CPU 안에 있는 매우 빠른 임시기억장치 (CPU와 직접 연결되어 메모리보다 속도가 빠름)
>    * CPU는 자체적으로 데이터를 저장할 방법이 없으므로 레지스터를 거쳐 데이터 전달
> 3) **산술논리연산장치** (ALU, Arithmetic Logic Unit): 산술연산과 논리연산

<br>

#### ⚙️ CPU의 연산과정
1) 제어장치가 메모리에 계산할 값을 로드 → 이후 레지스터 로드
2) 제어장치가 레지스터에 있는 값을 계산하라고 산술논리연산장치에 명령
3) 제어장치가 계산된 값을 다시 '레지스터에서 메모리로' 계산한 값 저장

#### ① 인터럽트
* 신호가 왔을 때 CPU를 정지시키는 것
* 인터럽트 발생 시 인터럽트 백터에서 인터럽트 핸들러 함수 실행
* 인터럽트 우선 순위에 따라 실행

> #### 📢 인터럽트 핸들러 함수
> 인터럽트가 발생했을 때 이를 핸들링하기 위한 함수 <br>
> 커널 내부의 IRQ를 통해 호출, request_irq()를 통해 인터럽트 핸들러 함수를 등록할 수 있음

> #### 📢 인터럽트 종류
> 1) 하드웨어 인터럽트 : I/O 디바이스에서 발생하는 인터럽트
>   * 인터럽트 라인 설계 → 인터럽트 실행 중지 → 운영체제 시스템콜 요청 → 원하는 디바이스로 향해 있는 디바이스에 있는 작은 로컬 버퍼에 접근
> 2) 소프트웨어 인터럽트 (트랩): 프로세스 오류 등으로 프로세스가 시스템콜 호출

<br>

### 2️⃣ DMA 컨트롤러
* I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
* CPU의 많은 인터럽트 요청으로 CPU 부하를 막아주거나 보조한다
* 하나의 작업을 CPU, DMA 컨트롤러가 동시에 하지 않는다.

<br>

### 3️⃣ 메모리 (RAM, Random Access Memory)
* 전자회로에서 데이터, 상태, 명령어 등을 기록하는 장치
* 메모리가 크면 클수록 많은 일을 동시에 할 수 있음

<br>

### 4️⃣ 타이머
* 특정 프로그램에 시간 제한을 다는 역할

<br>

### 5️⃣ 디바이스 컨트롤러
* 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU

<br>

### 6️⃣ 로컬 버퍼
* 각 디바이스에서 데이터를 임시로 저장하기 위한 작은 메모리

