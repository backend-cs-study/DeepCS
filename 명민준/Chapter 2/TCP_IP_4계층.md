# 2.2 TCP/IP 4계층 모델

## 개요

인터넷 프로토콜 스위트(Internet Protocol Suite)는 인터넷에서 컴퓨터들이 서로 정보를 주고받기 위해 사용하는 프로토콜 집합이며, TCP/IP 4계층 모델이나 OSI 7계층 모델로 설명됩니다.

TCP/IP 모델은 프로토콜의 네트워킹 범위에 따라 4개의 계층으로 구성됩니다.

---

## 2.2.1 계층 구조

### TCP/IP 4계층과 OSI 7계층 비교

| TCP/IP 4계층         | OSI 7계층                                |
|----------------------|------------------------------------------|
| Application          | Application, Presentation, Session       |
| Transport            | Transport                                |
| Internet             | Network                                  |
| Link (Network Access)| Data Link, Physical                      |

- OSI는 애플리케이션 계층을 세분화하고, 링크 계층을 물리/데이터링크로 나눕니다.
- 계층 구조는 특정 계층이 변경되더라도 다른 계층에 영향을 주지 않도록 설계되었습니다.

---

## 애플리케이션 계층

응용 프로그램이 사용하는 프로토콜 계층으로 사용자에게 직접 서비스를 제공합니다.

### 주요 프로토콜

- **FTP**: 파일 전송
- **SSH**: 안전한 원격 접속
- **HTTP**: 웹 통신
- **SMTP**: 이메일 전송
- **DNS**: 도메인 이름 ↔ IP 주소 변환

---

## 전송 계층

송신자와 수신자 간의 연결을 관리하며 데이터의 신뢰성, 흐름 제어 등을 담당합니다.  
대표 프로토콜: TCP, UDP

### TCP (Transmission Control Protocol)

- 연결 지향
- 신뢰성 보장 (순서 보장, 재전송, 수신 확인)
- 가상회선 방식 사용

#### TCP 3-Way Handshake

1. 클라이언트 → 서버: SYN
2. 서버 → 클라이언트: SYN + ACK
3. 클라이언트 → 서버: ACK

#### TCP 4-Way Handshake (연결 해제)

1. 클라이언트 → 서버: FIN (FIN_WAIT_1)
2. 서버 → 클라이언트: ACK (CLOSE_WAIT → FIN_WAIT_2)
3. 서버 → 클라이언트: FIN
4. 클라이언트 → 서버: ACK (TIME_WAIT → CLOSED)

**TIME_WAIT**
- 지연 패킷 대비
- 연결 종료 확인

---

### UDP (User Datagram Protocol)

- 비연결형
- 순서 보장 없음, 수신 확인 없음
- 데이터그램 방식 사용

---

## 인터넷 계층

목적지 IP 주소를 기반으로 패킷을 전달합니다.  
비연결형이며 신뢰성을 보장하지 않습니다.

### 주요 프로토콜

- **IP**: 주소 지정
- **ARP**: IP ↔ MAC 변환
- **ICMP**: 네트워크 상태 진단

---

## 링크 계층

실제 장치 간 물리적 데이터 전송 담당 계층입니다.  
전선, 무선, 광섬유 등을 통해 신호를 주고받습니다.

### 물리 계층

- **유선 LAN (IEEE 802.3)**
    - 전이중화 통신 (Full Duplex) 기반
    - 트위스트 페어 케이블 사용
    - 커넥터: RJ-45

- **광섬유 케이블**
    - 고속, 장거리 전송
    - 내부 반사를 통한 전송
    - Core, Cladding 구조

### 데이터 링크 계층

- 프레임 구성 및 에러 검출
- 이더넷 프레임 구조:

