# 운영체제 – 프로세스 & 스레드

## 1. 기본 개념 🎯

- **프로세스(Process)**  
  메모리에 로드되어 실행 중인 프로그램의 인스턴스. 운영체제의 CPU 스케줄러에 의해 작업 단위로 취급됨.

- **스레드(Thread)**  
  프로세스 내 실행 흐름의 단위. 한 프로세스는 여러 스레드를 가질 수 있으며, 스레드는 코드·데이터·힙을 공유하고 별도의 스택을 가짐.

---

## 2. 프로세스의 생성과 상태 전이

- **생성 단계** (`fork()`, `exec()`)
    - `fork()`: 기존 프로세스를 복제하여 자식 프로세스 생성
    - `exec()`: 새로운 이미지로 교체

- **상태 전이**
    - `New` → `Ready` → `Running`
    - I/O 등으로 `Blocked`
    - 메모리 부족 시 `Suspended`
    - 실행 후 → `Terminated`

---

## 3. 프로세스 메모리 구조 & PCB

- 메모리 영역:
    - **코드 영역**: 기계어 명령
    - **데이터 영역**: 전역/정적 변수 (BSS, Data 포함)
    - **힙(Heap)**: 동적 메모리 할당
    - **스택(Stack)**: 지역변수, 함수 호출 정보

- **프로세스 제어 블록(PCB)**  
  프로세스 속성, 상태, 레지스터, 메모리 정보 등을 저장하며 문맥 교환 시 사용됨

---

## 4. 문맥 교환 (Context Switching)

- 프로세스 간 문맥 교환:
    - PCB 저장/복원, 캐시 미스 발생 가능

- 스레드 간 문맥 교환:
    - 공유 메모리 구조로 더 가볍고 빠름

---

## 5. 멀티프로세싱 vs 멀티스레딩

- **멀티프로세싱**
    - 여러 프로세스를 동시에 실행. 안정성↑, IPC 필요

- **멀티스레딩**
    - 한 프로세스 내 여러 스레드 실행
    - 장점: 자원 효율·반응성 향상
    - 단점: 하나의 스레드 문제 → 전체 영향

---

## 6. 프로세스 간 통신 (IPC)

- **공유 메모리**
- **파이프(Pipe)**: 익명 / 명명된
- **메시지 큐**, **소켓**, **파일 기반 통신**

---

## 7. 프로세스 vs 스레드 비교

| 구분       | 프로세스                               | 스레드                                |
|------------|----------------------------------------|----------------------------------------|
| 생성/종료 비용 | 높음                                   | 낮음                                   |
| 문맥 교환 시간 | 느림                                   | 빠름                                   |
| 주소 공간     | 독립적인 가상 주소 공간                | 같은 주소 공간(shared code/data/heap) |
| 자원 공유     | 별도 자원(메모리 등)                     | 코드·데이터 공유                       |
| 오류 영향     | 독립적                                 | 하나 문제 → 전체에 영향 가능          |

---

## 8. 요약

- **프로세스**: 실행 중인 프로그램의 독립된 단위, 무겁고 자원 소모 큼
- **스레드**: 프로세스 내 경량 단위, 자원 공유로 효율적
- **문맥 교환**: PCB 기반으로 상태 저장/복구
- **동시성 구현**: 멀티프로세스는 안정성, 멀티스레드는 효율성 중심
- **통신 방법**: IPC 기법 다양하게 활용