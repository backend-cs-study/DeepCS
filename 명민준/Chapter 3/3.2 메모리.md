# 운영체제 – 메모리

## 1. 메모리 계층 구조

- **레지스터**: CPU 내부, 초고속, 초소용량
- **캐시 (L1/L2/L3)**: CPU와 메인 메모리 사이, 빠르고 소용량
- **RAM (메인 메모리)**: 중간 속도, 휘발성
- **보조기억장치 (HDD/SSD)**: 가장 느리지만 대용량, 비휘발성

### 캐시의 핵심 개념
- **지역성(Locality)**
    - 시간 지역성: 최근 사용한 데이터 재사용
    - 공간 지역성: 근처 데이터 사용

- **캐시 적중(Cache Hit)** vs **캐시 미스(Cache Miss)**
    - 히트: 빠르게 데이터 접근
    - 미스: 느린 메모리 접근

- **캐시 매핑 방식**
    - 직접 매핑 (Direct Mapping)
    - 완전 연관 매핑 (Fully Associative)
    - 집합 연관 매핑 (Set Associative)

---

## 2. 웹 브라우저 캐시 구조

| 구분 | 범위 | 휘발성 | 용량 | 특징 |
|------|------|--------|------|------|
| 쿠키 | 도메인 | X | 약 4KB | 만료 기한 있음 |
| 로컬 스토리지 | 도메인 | X | 약 5~10MB | 브라우저 종료 후에도 유지 |
| 세션 스토리지 | 탭 | O | 약 5MB | 탭 닫으면 삭제됨 |

> 참고: Redis 등으로 DB 위에 캐시 계층을 둘 수 있음

---

## 3. 가상 메모리

- 가상 주소 → 물리 주소로 MMU가 변환
- **페이지 테이블**로 주소 매핑
- **TLB (Translation Lookaside Buffer)**: 페이지 테이블 캐시 역할
- 물리 메모리에 없는 페이지 접근 → **페이지 폴트(Page Fault)** 발생
- **스와핑(Swapping)**: 디스크와 메모리 간 데이터 교환

### 스레싱(Thrashing)
- 페이지 폴트가 너무 자주 발생 → 성능 급감
- 해결책:
    - RAM 증설
    - SSD 사용
    - 작업 세트(Working Set) 유지
    - **PFF(Page Fault Frequency)** 기반 조절

---

## 4. 메모리 할당 기법

### 연속 할당 (Contiguous Allocation)
- **고정 분할**: 미리 정해진 크기, 내부 단편화 발생
- **가변 분할**: 요청에 따라 분할, 외부 단편화 발생

#### 할당 전략
- First Fit: 첫 번째 맞는 공간
- Best Fit: 가장 작은 맞춤 공간
- Worst Fit: 가장 큰 공간

### 불연속 할당 (Non-contiguous Allocation)
- **페이징(Paging)**: 고정 크기 페이지 → 고정 크기 프레임에 저장
- **세그멘테이션(Segmentation)**: 의미 단위로 분리(code, stack 등)
- **페이지드 세그멘테이션**: 두 방법의 혼합

---

## 5. 페이지 교체 알고리즘

| 알고리즘 | 설명 |
|----------|------|
| Optimal | 가장 이상적인 방식 (실제 구현 어려움) |
| FIFO | 가장 오래된 페이지 제거 |
| LRU | 가장 오래 사용하지 않은 페이지 제거 |
| Clock (NUR) | 참조 비트를 순환적으로 확인 |
| LFU | 가장 적게 참조된 페이지 제거 |