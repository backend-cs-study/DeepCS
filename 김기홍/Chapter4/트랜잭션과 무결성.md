# 트랜잭션과 무결성

## 트랜잭션

**트랜잭션(Transaction)** 은 데이터베이스에서 하나의 논리적 작업 단위로, 여러 데이터 변경 작업을 하나로 묶어 처리합니다. 트랜잭션은 데이터의 일관성과 신뢰성을 보장하기 위해 반드시 ACID 네 가지
특성을 만족해야 합니다
ACID

- 원자성(Atomicity)
    - 트랜잭션 내 모든 작업은 모두 성공하거나 모두 실패해야 합니다. 중간에 하나라도 실패하면 전체 작업이 취소(rollback)되고, 성공 시에는 모두 반영(commit)됩니다
    - 은행 계좌 이체 시, 출금과 입금이 모두 성공해야만 트랜잭션이 완료되며, 하나라도 실패하면 전체가 취소됩니다.
    - 트랜잭션 전파: 여러 계층이나 서비스에서 트랜잭션이 중첩될 때, 내부 트랜잭션이 롤백되면 전체 트랜잭션도 롤백되는 식으로 전파됩니다
- 일관성(Consistency)
    - 트랜잭션 전후로 데이터베이스는 항상 일관된 상태를 유지해야 합니다. 즉, 무결성 제약조건(기본키, 외래키, 도메인 등)을 항상 만족해야 합니다
    - 예시: 잔고가 음수가 되지 않거나, 외래키 제약조건이 깨지지 않아야 합니다.
- 격리성(Isolation)
    - 동시에 여러 트랜잭션이 실행될 때, 서로의 작업이 간섭하지 않도록 독립적으로 처리되어야 합니다. 각 트랜잭션은 마치 혼자 실행되는 것처럼 보장됩니다
    - 예시: 두 사용자가 동시에 상품을 구매해도 재고 감소가 정확하게 반영되어야 합니다.
- 지속성(Durability)
    - **무결성(Integrity)** 은 데이터베이스에 저장된 데이터의 정확성, 일관성, 유효성을 의미합니다. 무결성은 데이터에 결함이 없고, 현실 세계의 상태와 논리적으로 일치함을 보장합니다

## 무결성(Integrity)

**무결성(Integrity)** 은 데이터베이스에 저장된 데이터의 정확성, 일관성, 유효성을 의미합니다. 무결성은 데이터에 결함이 없고, 현실 세계의 상태와 논리적으로 일치함을 보장합니다

### 무결성의 역할

- 데이터의 중복, 누락, 논리적 오류를 방지합니다.

- 테이블 간 관계와 데이터의 신뢰성을 유지합니다.

- 데이터베이스의 정확성과 일관성을 시스템적으로 보장합니다

## 트랜잭션과 무결성의 관계

트랜잭션의 **일관성(Consistency)** 은 무결성 제약조건을 항상 만족하도록 보장합니다. 즉, 트랜잭션이 시작되기 전과 끝난 후, 데이터베이스는 무결성 제약조건을 반드시 충족해야 하며, 이를 통해 데이터의
정확성과 신뢰성을 유지합니다
