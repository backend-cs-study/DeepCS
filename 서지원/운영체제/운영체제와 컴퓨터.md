# Chapter3.1 운영체제와 컴퓨터

<br>

# 📚 목차

> **[1. 운영체제의 역할과 구조](#운영체제의-역할과-구조)**
>
> **[2. 컴퓨터의 요소](#컴퓨터의-요소)**

<br>

## 운영체제의 역할과 구조

### 운영체제의 역할

- **CPU 스케쥴링과 프로세스 관리** 

    ➡️ CPU 소유권을 **어떤 프로세스에 할당**할지, `프로세스`의 **생성**과 **삭제**, **자원 할당** 및 **반환** 관리


- **메모리 관리**

    ➡️ 한정된 **메모리**를 어떤 프로세스에 얼마큼 **할당**해야하는지 관리


- 디스크 파일 관리

    ➡️ **디스크 파일**을 어떠한 방법으로 **보관**할지 관리 



- I/O 디바이스 관리

    ➡️ 마우스, 키보드, 컴퓨터 간에 데이터를 주고받는 것을 관리


<br>

### 운영체제의 구조


![Image](https://github.com/user-attachments/assets/e6493fc4-3d5a-4d75-bb79-60bfac612664)

> 💡 **GUI**
> 
> `사용자 인터페이스`로 아이콘을 마우스로 클릭하는 **단순한 동작으로 컴퓨터와 상화작용**할 수 있도록 해준다. 


> 💡 **드라이버**
>
> 하드웨어 제어를 위한 소프트웨어


> 💡 **CUI**
>
> 그래픽이 아닌 **명령어**로 처리하는 인터페이스 **ex> CUI만 있는 리눅스 서버** 


<br>

### 시스템콜 

- 운영체제가 커널에 접근하기 위한 인터페이스
- 유저 프로그램이 운영체제의 서비스를 받기 위해 **커널함수를 호출할 때 사용**한다. 
- 하나의 추상화 계층이다. 

![Image](https://github.com/user-attachments/assets/c0e8ffb1-4278-4a82-8594-c2e2ca1b0274)


<br>

**[흐름]**

> 💡 **유저 모드와 커널 모드**
> 
> **유저모드:** 유저가 접근할 수 있는 영역, **컴퓨터 자원에 침범하지 못함** 
> 
> **커널모드:**  **모둔 컴퓨터 자원에 접근할 수 있음**
> 
> > **커널이란?**
> >
> > 운영체제의 핵심 부분이자 보안, 메모리, 프로세스 관리 등 중추적인 역할을 한다. 

<br>

1. 유저 프로그램 ➡️ **I/O요청으로 트랩 발동**


2. 요청 확인 후 **유저모드가 ➡️ 시스템 콜을 통해 ➡️ 커널 모드로 변환**되어 실행


3. 작업 수행 후 **커널 모드에서 ➡️ 유저 모드로 변환**


<br>

**[장점]**


- 컴퓨터 자원에 대한 직접 접근을 차단할 수 있다.


- 프로그램을 다른 프로그램으로부터 보호할 수 있다. 


- **네트워크 통신**이나 **데이터베이스**와 같은 낮은 단계의 영역 처리에 대한 부분을 많이 신경쓰지 않고 프로그램을 구현할 수 있다.
  ![Image](https://github.com/user-attachments/assets/75fba323-3ff1-4ba5-9dc2-0f0100836eca)


<br>

### modebit

- `유저 모드`와 `커널 모드`를 구분해준다. 
- **1 or 0의 값**을 가지는 flag 변수 
- 카메라, 키보드 등의 **디바이스는 운영체제를 통해서만 작동**해야한다. 

![Image](https://github.com/user-attachments/assets/522f5209-c6cc-4fb2-af70-68580b763a0c)


<br>

## 컴퓨터의 요소

### CPU (Central Processing Unit)

- **산술논리연산장치**, **제어장치**, **레지스터**로 구성되어 있는 컴퓨터 장치이다. 
- `인터럽트`에 의해 단순히 <ins>메모리에 존재하는 명령어를 해석해서 실행</ins>하는 일꾼

![Image](https://github.com/user-attachments/assets/ff7be098-f95d-4dcc-9a62-20f353b50f0d)


<br>

#### 제어장치 (CU, Control Unit)

프로세스 조작을 지시하는 부품

- <ins>**입출력장치 간 통신을 제어**</ins>하고 명령어들을 읽고 해석하며 <ins>**데이터 처리를 위한 순서를 결정**</ins>한다. 


<br>

#### 레지스터

매우 빠른 임시기억장치

-  CPU와 직접 연결되어 있어 **메모리보다 수십, 수백배의 연산 속도**를 가진다. 
- CPU는 자체적으로 데이터를 저장할 수 없어 **레지스터를 거쳐 데이터를 전달**한다. 


<br>

#### 산술논리연산장치 (ALU, Arithmetic Logic Unit)

덧셈 뺄셈 같은 두 숫자의 산술 연살 & 배타적 논리합, 논리곱을 계산하는 **디지털 회로**


> 🔎 CPU 연산처리 
> 
> ![Image](https://github.com/user-attachments/assets/3cf1db43-4145-4910-bf9a-76e68e80cf28)


<br>

#### 인터럽트

어떤 신호가 들어왔을 때 **CPU를 잠깐 정지**시키는 것

- 0으로 숫자를 나누는 연산, 디바이스로 인한 인터럽트 등에 의해 발생한다. 
- 인터럽트 간에는 <ins>**우선 순위**</ins>가 존재한다. 


<br>

**[흐름]**

🛑 **인터럽트 발생**

인터럽트 핸들러 함수가 모여 있는 인터럽트 벡터로 가서 **인터럽트 핸들러 함수 실행**

> 💡 **인터럽트 핸들러 함수**
> 
> 커널 내부의 IRQ를 통해 호출되며, `request_irq()`를 통해 함수에 등록 가능하다.

<br>

**[종류]**

- 하드웨어 인터럽트
    
    - 키보드, 마우스 연결 등 **IO 디바이스에서 발생**

    - 운영체제에 시스템콜을 요청해서 원하는 디바이스로 향해 디바이스에 있는 작은 로컬 버퍼에 접근하여 일을 수행한다. 


- 소프트웨어 인터럽트

    - 프로세스 오류 등으로 프로세스가 시스템 콜을 호출할 때 발동

<br>

#### DMA 컨트롤러

IO 디바이스가 **메모리**에 `직접 접근`할 수 있도록 하는 **하드웨어 장치**

- CPU에만 많은 인터럽트 요청이 들어오는 것을 막아 **CPU의 부하를 막는다.**
- `하나의 작업`을 **CPU와 DMA가 같이 하는 것을 방지**한다. 


<br>

#### 메모리

전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치 

- 보통 RAM(Random Accedd Menory)


<br>

#### 타이머

프로그램에 시간 제한을 다는 역할


<br>

#### 디바이스 컨트롤러

컴퓨터와 연결되어 있는 **IO 디바이스들의 작은 CPU**

![Image](https://github.com/user-attachments/assets/4fa7a9cb-179c-4599-b310-09e1b1e095bc)

**로컬 버퍼**: 각 디바이스에서 데이터를 **임시로 저장하기 위한 작은 메모리**