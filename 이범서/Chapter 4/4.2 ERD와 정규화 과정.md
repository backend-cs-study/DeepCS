# ERD와 정규화(Normalization)

## 1. ERD (Entity Relationship Diagram)란?
- **ERD(엔터티-관계 다이어그램)**는 데이터베이스를 설계할 때 가장 먼저 작성하는 데이터 구조의 설계도입니다.
- 엔터티(테이블), 속성(컬럼), 릴레이션(관계)을 시각적으로 표현합니다.
- 데이터베이스 구조, 관계, 데이터 흐름을 명확하게 파악할 수 있으며, 유지보수 및 확장 시 기준이 됩니다.
- **단점:** 비정형 데이터(구조가 없는 데이터, 예: 자유 텍스트, 이미지 등)는 충분히 표현할 수 없음.

---

## 2. 비정형(비구조화) 데이터란?
- **정형 데이터:** 표, 테이블 등 미리 정의된 구조를 가진 데이터 (ex. RDB 테이블)
- **비정형 데이터:** 정해진 구조가 없거나 자유롭게 저장되는 데이터 (ex. 이메일, 이미지, 자유 텍스트 등)
- RDB보다는 NoSQL, 파일 스토리지 등에 저장하는 경우가 많음

---

## 3. 정규화(Normalization) 과정이란?
- 데이터베이스에서 **중복, 이상현상(Anomaly)**을 방지하기 위해 테이블을 논리적으로 분해하고 구조를 개선하는 과정입니다.
- 목적:
    - 데이터 중복 최소화
    - 이상현상(삽입/삭제/갱신) 방지
    - 저장 공간 효율화
    - 데이터 무결성 보장

### 정규화 원칙
- 자료의 중복성을 감소시킨다.
- 독립적인 주제는 별도의 릴레이션(테이블)로 분리한다.
- 각 릴레이션은 독립적으로 표현될 수 있어야 한다.

---

## 4. 정규화 단계별 설명

### ▶ 제1정규형(1NF)
- 모든 컬럼 값이 **원자값(Atomic value, 더 이상 분해 불가한 값)**이어야 함
- 테이블 내 한 칸에 여러 값(리스트, 배열 등)이 들어가면 안 됨

  | 유저ID | 과목명               | 점수   |
    |--------|---------------------|-------|
  | hong   | C++, Java           | 90,80 | ❌ (잘못된 예시)
  | hong   | C++                 | 90    | ✔️ (올바른 예시)
  | hong   | Java                | 80    |

---

### ▶ 제2정규형(2NF)
- 1NF를 만족하고, **기본키의 부분집합에만 종속되는 속성(부분 함수 종속성)**을 제거한 상태
- 모든 속성이 기본키 전체에 완전 종속되어야 함

[복합키] (학생ID, 과목명) → 점수
(학생ID → 이름) ⇒ 이름을 별도 테이블로 분리


---

### ▶ 제3정규형(3NF)
- 2NF를 만족하고, **이행적 함수 종속성(Transitive Dependency)**이 없어야 함
- 즉, 기본키가 아닌 컬럼이 기본키가 아닌 다른 컬럼에 종속되어 있으면 안 됨


(유저ID → 등급 → 할인율)
⇒ 유저ID → 등급, 등급 → 할인율로 테이블 분리


---

### ▶ 보이스-코드 정규형(BCNF)
- 3NF를 만족하면서, 모든 함수 종속성에서 **결정자가 반드시 후보키**여야 함
- 후보키가 아닌 컬럼이 결정자가 되는 함수 종속성은 제거

---

## 5. 데이터베이스 이상현상(Anomaly)이란?
- **삽입 이상**: 일부 데이터만 입력 불가
- **삭제 이상**: 불필요한 데이터까지 삭제
- **갱신 이상**: 일부만 수정되어 불일치 발생

---

## 6. 예상 면접 Q&A

<details>
<summary><b>Q1. ERD(Entity Relationship Diagram)란 무엇이며, 왜 중요한가요?</b></summary>
A. ERD는 데이터베이스의 구조와 테이블 간의 관계를 시각적으로 표현한 설계도입니다. 데이터베이스 설계, 개발, 유지보수, 확장 등 모든 단계의 기준이 됩니다.
</details>

<details>
<summary><b>Q2. 정규화(Normalization)의 목적은 무엇인가요?</b></summary>
A. 데이터 중복 및 이상현상을 방지하고, 데이터의 무결성과 저장 공간 효율성을 높이기 위해 테이블을 논리적으로 분해하는 과정입니다.
</details>

<details>
<summary><b>Q3. 제1정규형(1NF)과 제2정규형(2NF)의 차이는?</b></summary>
A. 1NF는 모든 컬럼이 원자값을 가져야 하며, 2NF는 1NF이면서 부분 함수 종속성을 제거하여 모든 속성이 기본키 전체에 완전 종속되도록 한 것입니다.
</details>

<details>
<summary><b>Q4. 제3정규형(3NF)에서 '이행적 함수 종속'이란 무엇인가요?</b></summary>
A. 기본키가 아닌 컬럼이 다른 컬럼을 통해 간접적으로 결정되는 종속성입니다. 이를 제거하지 않으면 데이터 중복과 이상현상이 발생합니다.
</details>

<details>
<summary><b>Q5. 보이스-코드 정규형(BCNF)의 필요성은?</b></summary>
A. 3NF만으로는 후보키가 아닌 컬럼이 결정자가 되는 경우 데이터 무결성 문제가 남을 수 있으므로, 모든 결정자가 후보키가 되도록 분해해야 합니다.
</details>

---
